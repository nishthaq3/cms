<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<body>
	<h3>Live chat Test</h3>

	<input id="userId" placeholder="Your user ID"/>
	<button onclick="connectUser()">Connect</button>

	<br><br>

	<input id="reciverId" placeholder="Reciever ID"/>
	<input id="message" placeholder="Message"/>

	<button onclick="sendMessage()">Send</button>


	<div id="messages"></div>

	<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

	<script>
		const socket=io("http://localhost:3000");

		function connectUser(){
			const userId=document.getElementById("userId").value;
			socket.emit("user-online",userId);
		}

		function sendMessage(){
			const senderId=document.getElementById("userId").value;
			const recieverId=document.getElementById("recieverId").value;
			const message=document.getElementById("message").value;

			socket.emit("sent-message",{
				senderId,
				recieverId,
				message
			})
		}

		socket.on("recieved-message",(data)=>{
			appendMessage("Recieved: "+data.message)
		})
	</script>
</body>
</html>